(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reportProblem/reportProblem"],{"427f":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(o("c0ea")),n=r(o("2a75"));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(){return o.e("components/problemMode/mode1").then(o.bind(null,"954a"))},s={data:function(){return{ponitId:"",userInfo:"",problems:"",isShowMode:!1,upProblemId:[],upProblems:[],chooseProblem:"",nowProblem:{},longitude:"",latitude:""}},components:{mode1:l},onReady:function(){this.userInfo=e.getStorageSync("userInfo"),this.longitude=e.getStorageSync("userLocation").longitude,this.latitude=e.getStorageSync("userLocation").latitude},onLoad:function(e){this.ponitId=e.id,this.getProblem(e.id)},methods:{getProblem:function(t){var o=this;n.default.getRequest(i.default.TASK_PATROL_POINT_GET_PROBLEM,{pointId:t},function(i){o.problems=i.data,e.setStorageSync("reportProblem_"+t,o.problems)},function(i){o.problems=e.getStorageSync("reportProblem_"+t)?e.getStorageSync("reportProblem_"+t):[]})},showMode:function(e){this.chooseProblem=this.getChooseProblem(e),this.nowProblem=this.getNowProblem(e),this.isShowMode=!0},hideMode:function(e){this.isShowMode=!1},confirmMdoe:function(e){e.id=this.chooseProblem.id,e.problemTitle=this.nowProblem.problemTitle,e.pointId=this.ponitId,e.problemStatus=1,e.problemLevel=1,e.problemType=1,e.longitude=this.longitude,e.latitude=this.latitude,e.creatorId=this.userInfo.id,e.creatorName=this.userInfo.sname,this.upProblems[this.upProblemId.indexOf(this.chooseProblem.id)]=e,this.hideMode(e)},checkProblem:function(e){var t=this.upProblemId;if(e.detail.value.length>this.upProblemId.length){var o=e.detail.value[e.detail.value.length-1];this.nowProblem=this.getNowProblem(o);var i=this.nowProblem.problemTitle,n={id:o,problemDetail:i,problemTitle:this.nowProblem.problemTitle,pointId:this.ponitId,problemStatus:1,problemLevel:1,problemType:1,longitude:this.longitude,latitude:this.latitude,creatorId:this.userInfo.id,creatorName:this.userInfo.sname};this.upProblems.push(n),this.showMode(o)}else this.upProblems.splice(this.noFondId(e.detail.value,t),1);this.upProblemId=e.detail.value},noFondId:function(e,t){for(var o=t,i=0;i<e.length;i++)-1!=t.indexOf(e[i])&&t.splice(t.indexOf(e[i]),1);return o.indexOf(t[0])},getNowProblem:function(e){for(var t=0;t<this.problems.length;t++)if(this.problems[t].id==e)return this.problems[t]},getChooseProblem:function(e){for(var t=0;t<this.upProblems.length;t++)if(this.upProblems[t].id==e)return this.upProblems[t]},confirm:function(){n.default.upProblemTeams(this.upProblems),e.showLoading({mask:!0}),setTimeout(function(){e.hideLoading(),e.$emit("refreshPollutionPage",!0),e.navigateBack()},500)}}};t.default=s}).call(this,o("6e42")["default"])},5950:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},n=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return n})},7578:function(e,t,o){},"7e84":function(e,t,o){"use strict";o.r(t);var i=o("427f"),n=o.n(i);for(var r in i)"default"!==r&&function(e){o.d(t,e,function(){return i[e]})}(r);t["default"]=n.a},"8bb0":function(e,t,o){"use strict";o.r(t);var i=o("5950"),n=o("7e84");for(var r in n)"default"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r);o("ebc5");var l=o("2877"),s=Object(l["a"])(n["default"],i["a"],i["b"],!1,null,"787e3898",null);t["default"]=s.exports},ebc5:function(e,t,o){"use strict";var i=o("7578"),n=o.n(i);n.a}},[["5d03","common/runtime","common/vendor"]]]);