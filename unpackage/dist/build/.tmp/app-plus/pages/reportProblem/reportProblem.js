(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reportProblem/reportProblem"],{"28b8":function(e,o,t){},"427f":function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=r(t("c0ea")),i=r(t("2a75"));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(){return t.e("components/problemMode/mode1").then(t.bind(null,"954a"))},u={data:function(){return{pollutionInfo:{},userInfo:"",problems:"",isShowMode:!1,upProblemId:[],upProblems:[],chooseProblem:"",nowProblem:{},longitude:"",latitude:""}},components:{mode1:l},onReady:function(){this.userInfo=e.getStorageSync("userInfo"),this.longitude=e.getStorageSync("userLocation").longitude,this.latitude=e.getStorageSync("userLocation").latitude},onLoad:function(e){this.pollutionInfo=i.default.pollutionInfo,this.getProblem(this.pollutionInfo.id)},methods:{getProblem:function(o){var t=this;i.default.getRequest(n.default.TASK_PATROL_POINT_GET_PROBLEM,{pointId:o},function(n){t.problems=n.data,e.setStorageSync("reportProblem_"+o,t.problems)},function(n){t.problems=e.getStorageSync("reportProblem_"+o)?e.getStorageSync("reportProblem_"+o):[]})},showMode:function(e){this.chooseProblem=this.getChooseProblem(e),this.nowProblem=this.getNowProblem(e),this.isShowMode=!0},hideMode:function(e){this.isShowMode=!1},confirmMdoe:function(e){e.id=this.chooseProblem.id,e.problemTitle=this.nowProblem.problemTitle,e.pointId=this.pollutionInfo.id,e.departmentId=this.pollutionInfo.wryGlflx,e.orgId=this.pollutionInfo.dwId,e.problemStatus=1,e.problemLevel=1,e.problemType=1,e.longitude=this.longitude,e.latitude=this.latitude,e.creatorId=this.userInfo.id,e.creatorName=this.userInfo.sname,this.upProblems[this.upProblemId.indexOf(this.chooseProblem.id)]=e,this.hideMode(e)},checkProblem:function(e){var o=this.upProblemId;if(e.detail.value.length>this.upProblemId.length){var t=e.detail.value[e.detail.value.length-1];this.nowProblem=this.getNowProblem(t);var n=this.nowProblem.problemTitle,i={id:t,problemDetail:n,problemTitle:this.nowProblem.problemTitle,pointId:this.pollutionInfo.id,departmentId:this.pollutionInfo.wryGlflx,orgId:this.pollutionInfo.dwId,problemStatus:1,problemLevel:1,problemType:1,longitude:this.longitude,latitude:this.latitude,creatorId:this.userInfo.id,creatorName:this.userInfo.sname};this.upProblems.push(i),this.showMode(t)}else this.upProblems.splice(this.noFondId(e.detail.value,o),1);this.upProblemId=e.detail.value},noFondId:function(e,o){for(var t=o,n=0;n<e.length;n++)-1!=o.indexOf(e[n])&&o.splice(o.indexOf(e[n]),1);return t.indexOf(o[0])},getNowProblem:function(e){for(var o=0;o<this.problems.length;o++)if(this.problems[o].id==e)return this.problems[o]},getChooseProblem:function(e){for(var o=0;o<this.upProblems.length;o++)if(this.upProblems[o].id==e)return this.upProblems[o]},confirm:function(){i.default.upProblemTeams(this.upProblems),e.showLoading({mask:!0}),setTimeout(function(){e.hideLoading(),e.$emit("refreshPollutionPage",!0),e.navigateBack()},500)}}};o.default=u}).call(this,t("6e42")["default"])},"682c":function(e,o,t){"use strict";var n=t("28b8"),i=t.n(n);i.a},"7e84":function(e,o,t){"use strict";t.r(o);var n=t("427f"),i=t.n(n);for(var r in n)"default"!==r&&function(e){t.d(o,e,function(){return n[e]})}(r);o["default"]=i.a},"8bb0":function(e,o,t){"use strict";t.r(o);var n=t("f594"),i=t("7e84");for(var r in i)"default"!==r&&function(e){t.d(o,e,function(){return i[e]})}(r);t("682c");var l=t("2877"),u=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,"43bb3af1",null);o["default"]=u.exports},f594:function(e,o,t){"use strict";var n=function(){var e=this,o=e.$createElement;e._self._c},i=[];t.d(o,"a",function(){return n}),t.d(o,"b",function(){return i})}},[["5d03","common/runtime","common/vendor"]]]);