(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/location/location"],{1026:function(t,i,n){},"75c2":function(t,i,n){"use strict";n.r(i);var o=n("d5c4"),e=n("ab1c");for(var a in e)"default"!==a&&function(t){n.d(i,t,function(){return e[t]})}(a);n("8b9b");var u=n("2877"),s=Object(u["a"])(e["default"],o["a"],o["b"],!1,null,"e43cb370",null);i["default"]=s.exports},"853b":function(t,i,n){"use strict";(function(t,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=s(n("c0ea")),a=s(n("2a75")),u=n("196c");function s(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{covers:[],circles:[],latitude:"",longitude:"",taskId:"",pointInfo:{},userLocation:{},distance:0,controls:[]}},onReady:function(){var i=t.createMapContext("locationMap"),n=i.$getAppMap();n.showUserLocation(!0),this.userInfo=t.getStorageSync("userInfo"),this.pointInfo=a.default.pollutionInfo,this.userLocation=t.getStorageSync("userLocation");var o=t.getSystemInfoSync().screenWidth,e=(t.getSystemInfoSync().windowHeight,o/750);this.controls=[{id:"toNavigation",position:{width:83*e,height:83*e,left:647*e,top:20*e},iconPath:"/static/images/icon_navigation.png",clickable:!0}],this.initMap(this.pointInfo),this.getDistance()},onLoad:function(t){},methods:{initMap:function(i){if(i.longitude){var n=u.mapTool.wgs84togcj02(1*i.longitude,1*i.latitude);this.longitude=n[0],this.latitude=n[1],this.circles=[{latitude:this.latitude,longitude:this.longitude,radius:i.distanceLimit,color:"#5087FB80",fillColor:"#5087FB50",strokeWidth:"2"}],this.covers=[{id:"person1",latitude:this.latitude,longitude:this.longitude,iconPath:"../../static/images/dingwei.png",label:{content:i.address,color:"#5087FB"}}]}else t.showToast({icon:"none",title:"位置未记录，请重新定位！"}),this.latitude=this.userLocation.latitude,this.longitude=this.userLocation.longitude},bindControltap:function(t){"toNavigation"==t.controlId&&this.toNavigation()},getDistance:function(){var t=this,i=new plus.maps.Point(this.userLocation.longitude,this.userLocation.latitude),n=new plus.maps.Point(this.pointInfo.longitude,this.pointInfo.latitude);plus.maps.Map.calculateDistance(i,n,function(i){t.distance=(i.distance/1e3).toFixed(2)})},toNavigation:function(){a.default.toNavigation(this.pointInfo.longitude,this.pointInfo.latitude)},toReport:function(){var i=this,n={id:this.pointInfo.pollutionId,wryType:this.pointInfo.wryType,longitude:this.userLocation.longitude,latitude:this.userLocation.latitude};t.showModal({title:"提示",content:"确认重新记录位置？",success:function(u){u.confirm?a.default.getRequest(e.default.TASK_PATROL_POINT_UPDATE_WRY_ADDRESS_DETAILED,n,function(n){i.pointInfo.longitude=i.userLocation.longitude,i.pointInfo.latitude=i.userLocation.latitude,i.initMap(i.pointInfo),t.$emit("refreshPollutionPage",!0),i.getDistance()}):u.cancel&&console.log(o("用户点击取消"," at pages\\location\\location.vue:135"))}})}}};i.default=c}).call(this,n("6e42")["default"],n("0de9")["default"])},"8b9b":function(t,i,n){"use strict";var o=n("1026"),e=n.n(o);e.a},"8fde":function(t,i,n){"use strict";(function(t){n("61ce"),n("921b");o(n("66fd"));var i=o(n("75c2"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,n("6e42")["createPage"])},ab1c:function(t,i,n){"use strict";n.r(i);var o=n("853b"),e=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(i,t,function(){return o[t]})}(a);i["default"]=e.a},d5c4:function(t,i,n){"use strict";var o=function(){var t=this,i=t.$createElement;t._self._c},e=[];n.d(i,"a",function(){return o}),n.d(i,"b",function(){return e})}},[["8fde","common/runtime","common/vendor"]]]);