(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/location/location"],{"251a":function(t,o,i){"use strict";var n=function(){var t=this,o=t.$createElement;t._self._c},e=[];i.d(o,"a",function(){return n}),i.d(o,"b",function(){return e})},"299b":function(t,o,i){},3108:function(t,o,i){"use strict";var n=i("299b"),e=i.n(n);e.a},"75c2":function(t,o,i){"use strict";i.r(o);var n=i("251a"),e=i("ab1c");for(var a in e)"default"!==a&&function(t){i.d(o,t,function(){return e[t]})}(a);i("3108");var u=i("2877"),s=Object(u["a"])(e["default"],n["a"],n["b"],!1,null,"0ab414e1",null);o["default"]=s.exports},"853b":function(t,o,i){"use strict";(function(t,n){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=s(i("c0ea")),a=s(i("2a75")),u=i("196c");function s(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{covers:[],circles:[],latitude:"",longitude:"",taskId:"",pointInfo:{},userLocation:{},distance:0,controls:[]}},onReady:function(){var o=t.createMapContext("locationMap"),i=o.$getAppMap();i.showUserLocation(!0),this.userInfo=t.getStorageSync("userInfo"),this.pointInfo=a.default.pollutionInfo,this.userLocation=t.getStorageSync("userLocation");var n=t.getSystemInfoSync().screenWidth,e=(t.getSystemInfoSync().windowHeight,n/750);this.controls=[{id:"toNavigation",position:{width:83*e,height:83*e,left:647*e,top:20*e},iconPath:"/static/images/icon_navigation.png",clickable:!0}],this.initMap(this.pointInfo),this.getDistance()},onLoad:function(t){},methods:{initMap:function(o){if(o.longitude){var i=u.mapTool.wgs84togcj02(1*o.longitude,1*o.latitude);this.longitude=i[0],this.latitude=i[1],this.circles=[{latitude:this.latitude,longitude:this.longitude,radius:o.distanceLimit,color:"#5087FB80",fillColor:"#5087FB50",strokeWidth:"2"}],this.covers=[{id:"person1",latitude:this.latitude,longitude:this.longitude,iconPath:"../../static/images/dingwei.png",label:{content:o.address,color:"#5087FB"}}]}else t.showToast({icon:"none",title:"位置未记录，请重新定位！"}),this.latitude=this.userLocation.latitude,this.longitude=this.userLocation.longitude},bindControltap:function(t){"toNavigation"==t.controlId&&this.toNavigation()},getDistance:function(){var t=this,o=new plus.maps.Point(this.userLocation.longitude,this.userLocation.latitude),i=new plus.maps.Point(this.pointInfo.longitude,this.pointInfo.latitude);plus.maps.Map.calculateDistance(o,i,function(o){t.distance=(o.distance/1e3).toFixed(2)})},toNavigation:function(){a.default.toNavigation(this.pointInfo.longitude,this.pointInfo.latitude)},toReport:function(){var o=this,i={id:this.pointInfo.pollutionId,wryType:this.pointInfo.wryType,longitude:this.userLocation.longitude,latitude:this.userLocation.latitude};t.showModal({title:"提示",content:"确认重新记录位置？",success:function(u){u.confirm?a.default.getRequest(e.default.TASK_PATROL_POINT_UPDATE_WRY_ADDRESS_DETAILED,i,function(i){console.log(n("重新定位成功"," at pages\\location\\location.vue:127")),o.pointInfo.longitude=o.userLocation.longitude,o.pointInfo.latitude=o.userLocation.latitude,o.initMap(o.pointInfo),t.$emit("refreshPollutionPage",!0),o.getDistance()},function(t){console.log(n(t," at pages\\location\\location.vue:134"))}):u.cancel&&console.log(n("用户点击取消"," at pages\\location\\location.vue:137"))}})}}};o.default=c}).call(this,i("6e42")["default"],i("0de9")["default"])},"8fde":function(t,o,i){"use strict";(function(t){i("61ce"),i("921b");n(i("66fd"));var o=n(i("75c2"));function n(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,i("6e42")["createPage"])},ab1c:function(t,o,i){"use strict";i.r(o);var n=i("853b"),e=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(o,t,function(){return n[t]})}(a);o["default"]=e.a}},[["8fde","common/runtime","common/vendor"]]]);