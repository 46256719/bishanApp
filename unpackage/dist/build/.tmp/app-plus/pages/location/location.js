(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/location/location"],{"1bc5":function(t,o,i){},"262e":function(t,o,i){"use strict";var n=function(){var t=this,o=t.$createElement;t._self._c},e=[];i.d(o,"a",function(){return n}),i.d(o,"b",function(){return e})},"6f5e":function(t,o,i){"use strict";var n=i("1bc5"),e=i.n(n);e.a},"75c2":function(t,o,i){"use strict";i.r(o);var n=i("262e"),e=i("ab1c");for(var a in e)"default"!==a&&function(t){i.d(o,t,function(){return e[t]})}(a);i("6f5e");var s=i("2877"),u=Object(s["a"])(e["default"],n["a"],n["b"],!1,null,"26dbe497",null);o["default"]=u.exports},ab1c:function(t,o,i){"use strict";i.r(o);var n=i("bdb8"),e=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(o,t,function(){return n[t]})}(a);o["default"]=e.a},bdb8:function(t,o,i){"use strict";(function(t,n){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=u(i("c0ea")),a=u(i("2a75")),s=i("196c");function u(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{covers:[],circles:[],latitude:"",longitude:"",taskId:"",pointInfo:{},userLocation:{},distance:0,controls:[]}},onReady:function(){this.getDistance()},onLoad:function(o){this.userInfo=t.getStorageSync("userInfo"),this.pointInfo=t.getStorageSync("taskInfo"),this.userLocation=t.getStorageSync("userLocation");var i=t.getSystemInfoSync().screenWidth,n=t.getSystemInfoSync().windowHeight,e=i/750;this.controls=[{id:"toNavigation",position:{width:83*e,height:83*e,left:597*e,top:n-335*e},iconPath:"/static/images/icon_navigation.png",clickable:!0}],this.initMap(this.pointInfo)},methods:{initMap:function(o){if(o.longitude){var i=s.mapTool.wgs84togcj02(o.longitude,o.latitude);this.longitude=i[0],this.latitude=i[1],this.circles=[{latitude:this.latitude,longitude:this.longitude,radius:o.distanceLimit,color:"#5087FB80",fillColor:"#5087FB50",strokeWidth:"2"}],this.covers=[{id:"person1",latitude:this.latitude,longitude:this.longitude,iconPath:"../../static/images/dingwei.png",label:{content:o.address,color:"#5087FB"}}]}else t.showToast({icon:"none",title:"位置未记录，请重新定位！"}),this.latitude=this.userLocation.latitude,this.longitude=this.userLocation.longitude},bindControltap:function(t){"toNavigation"==t.controlId&&this.toNavigation()},getDistance:function(){var o=this,i=t.createMapContext("locationMap"),n=i.$getAppMap();n.showUserLocation(!0);var e=new plus.maps.Point(this.userLocation.longitude,this.userLocation.latitude),a=new plus.maps.Point(this.pointInfo.longitude,this.pointInfo.latitude);plus.maps.Map.calculateDistance(e,a,function(t){o.distance=(t.distance/1e3).toFixed(2)})},toNavigation:function(){var t=this,o=s.mapTool.wgs84togcj02(t.pointInfo.longitude,t.pointInfo.latitude),i=o[0],e=o[1];"Android"==plus.os.name?plus.runtime.openURL("amapuri://route/plan/?sid=BGVIS1&did=BGVIS2&dlat="+e+"&dlon="+i+"&dev=0&t=0",function(t){console.log(n("Open system default browser failed: "+t.message," at pages\\location\\location.vue:116"))},"com.autonavi.minimap"):"iOS"==plus.os.name&&plus.runtime.launchApplication({action:"iosamap://path?sourceApplication=applicationName&sid=BGVIS1&did=BGVIS2&dlat="+e+"&dlon="+i+"&dev=0&t=0"},function(t){console.log(n("Open system default browser failed: "+t.message," at pages\\location\\location.vue:121"))})},toReport:function(){var o=this,i={id:this.pointInfo.pollutionId,wryType:this.pointInfo.wryType,longitude:this.userLocation.longitude,latitude:this.userLocation.latitude};t.showModal({title:"提示",content:"确认重新记录位置？",success:function(t){t.confirm?a.default.getRequest(e.default.TASK_PATROL_POINT_UPDATE_WRY_ADDRESS_DETAILED,i,function(t){console.log(n("成功"," at pages\\location\\location.vue:138")),o.pointInfo.longitude=o.userLocation.longitude,o.pointInfo.latitude=o.userLocation.latitude,o.initMap(o.pointInfo),o.getDistance()}):t.cancel&&console.log(n("用户点击取消"," at pages\\location\\location.vue:145"))}})}}};o.default=c}).call(this,i("6e42")["default"],i("0de9")["default"])}},[["8fde","common/runtime","common/vendor"]]]);