(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/location/location"],{"680e":function(t,o,i){"use strict";var n=function(){var t=this,o=t.$createElement;t._self._c},e=[];i.d(o,"a",function(){return n}),i.d(o,"b",function(){return e})},"75c2":function(t,o,i){"use strict";i.r(o);var n=i("680e"),e=i("ab1c");for(var a in e)"default"!==a&&function(t){i.d(o,t,function(){return e[t]})}(a);i("a747");var s=i("2877"),u=Object(s["a"])(e["default"],n["a"],n["b"],!1,null,"f34575f6",null);o["default"]=u.exports},a42b:function(t,o,i){},a747:function(t,o,i){"use strict";var n=i("a42b"),e=i.n(n);e.a},ab1c:function(t,o,i){"use strict";i.r(o);var n=i("bdb8"),e=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(o,t,function(){return n[t]})}(a);o["default"]=e.a},bdb8:function(t,o,i){"use strict";(function(t,n){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=u(i("c0ea")),a=u(i("2a75")),s=i("196c");function u(t){return t&&t.__esModule?t:{default:t}}var l={data:function(){return{covers:[],circles:[],latitude:"",longitude:"",taskId:"",pointInfo:{},userLocation:{},distance:0,controls:[]}},onReady:function(){var o=t.createMapContext("locationMap"),i=o.$getAppMap();i.showUserLocation(!0),this.userInfo=t.getStorageSync("userInfo"),this.pointInfo=a.default.pollutionInfo,this.userLocation=t.getStorageSync("userLocation");var n=t.getSystemInfoSync().screenWidth,e=t.getSystemInfoSync().windowHeight,s=n/750;this.controls=[{id:"toNavigation",position:{width:83*s,height:83*s,left:597*s,top:e-335*s},iconPath:"/static/images/icon_navigation.png",clickable:!0}],this.initMap(this.pointInfo),this.getDistance()},onLoad:function(t){},methods:{initMap:function(o){if(o.longitude){var i=s.mapTool.wgs84togcj02(o.longitude,o.latitude);this.longitude=i[0],this.latitude=i[1],this.circles=[{latitude:this.latitude,longitude:this.longitude,radius:o.distanceLimit,color:"#5087FB80",fillColor:"#5087FB50",strokeWidth:"2"}],this.covers=[{id:"person1",latitude:this.latitude,longitude:this.longitude,iconPath:"../../static/images/dingwei.png",label:{content:o.address,color:"#5087FB"}}]}else t.showToast({icon:"none",title:"位置未记录，请重新定位！"}),this.latitude=this.userLocation.latitude,this.longitude=this.userLocation.longitude},bindControltap:function(t){"toNavigation"==t.controlId&&this.toNavigation()},getDistance:function(){var t=this,o=new plus.maps.Point(this.userLocation.longitude,this.userLocation.latitude),i=new plus.maps.Point(this.pointInfo.longitude,this.pointInfo.latitude);plus.maps.Map.calculateDistance(o,i,function(o){t.distance=(o.distance/1e3).toFixed(2)})},toNavigation:function(){var t=this,o=s.mapTool.wgs84togcj02(t.pointInfo.longitude,t.pointInfo.latitude),i=o[0],e=o[1];"Android"==plus.os.name?plus.runtime.openURL("amapuri://route/plan/?sid=BGVIS1&did=BGVIS2&dlat="+e+"&dlon="+i+"&dev=0&t=0",function(t){console.log(n("Open system default browser failed: "+t.message," at pages\\location\\location.vue:117"))},"com.autonavi.minimap"):"iOS"==plus.os.name&&plus.runtime.launchApplication({action:"iosamap://path?sourceApplication=applicationName&sid=BGVIS1&did=BGVIS2&dlat="+e+"&dlon="+i+"&dev=0&t=0"},function(t){console.log(n("Open system default browser failed: "+t.message," at pages\\location\\location.vue:122"))})},toReport:function(){var o=this,i={id:this.pointInfo.pollutionId,wryType:this.pointInfo.wryType,longitude:this.userLocation.longitude,latitude:this.userLocation.latitude};t.showModal({title:"提示",content:"确认重新记录位置？",success:function(t){t.confirm?a.default.getRequest(e.default.TASK_PATROL_POINT_UPDATE_WRY_ADDRESS_DETAILED,i,function(t){console.log(n("成功"," at pages\\location\\location.vue:139")),o.pointInfo.longitude=o.userLocation.longitude,o.pointInfo.latitude=o.userLocation.latitude,o.initMap(o.pointInfo),o.getDistance()}):t.cancel&&console.log(n("用户点击取消"," at pages\\location\\location.vue:146"))}})}}};o.default=l}).call(this,i("6e42")["default"],i("0de9")["default"])}},[["8fde","common/runtime","common/vendor"]]]);