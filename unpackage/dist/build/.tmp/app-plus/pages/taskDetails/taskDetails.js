(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/taskDetails/taskDetails"],{"41e2":function(t,e,s){"use strict";s.r(e);var n=s("b94e"),i=s("4450");for(var a in i)"default"!==a&&function(t){s.d(e,t,function(){return i[t]})}(a);s("8f73");var o=s("2877"),r=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"f6987fca",null);e["default"]=r.exports},4450:function(t,e,s){"use strict";s.r(e);var n=s("f0de"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);e["default"]=i.a},"8f73":function(t,e,s){"use strict";var n=s("a962"),i=s.n(n);i.a},a962:function(t,e,s){},b94e:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];s.d(e,"a",function(){return n}),s.d(e,"b",function(){return i})},d60b:function(t,e,s){"use strict";(function(t){s("61ce"),s("921b");n(s("66fd"));var e=n(s("41e2"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("6e42")["createPage"])},f0de:function(t,e,s){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(s("c0ea")),a=o(s("2a75"));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){return s.e("components/missionCard").then(s.bind(null,"1d77"))},c=function(){return s.e("components/issuesListCard").then(s.bind(null,"6934"))},u=function(){return s.e("components/taskDetailCard").then(s.bind(null,"f80d"))},l={data:function(){return{scrollH:0,userInfo:"",missions:[],page:0,type:"process",isReport:!1,name:""}},components:{missionCard:r,issuesListCard:c,taskDetailCard:u},onReady:function(){},onLoad:function(e){this.userInfo=t.getStorageSync("userInfo"),this.taskId=e.taskId,this.isReport=!!e.isReport&&e.isReport},methods:{getTaskProcess:function(e){var s=this,n={sLongitude:t.getStorageSync("userLocation").longitude,sLatitude:t.getStorageSync("userLocation").latitude,taskId:this.taskId,name:e};a.default.getRequest(i.default.TASK_PATROL_POINT_PROCESS_LIST,n,function(e){if(s.missions=e.data,t.setStorageSync("taskDetailsTaskProcess"+s.taskId,s.missions),0==s.missions.length){var n=t.getStorageSync("onTask")?t.getStorageSync("onTask"):[];n.splice(n.indexOf(s.taskId)),t.setStorageSync("onTask",n),a.default.unUpLoction(s.taskId),t.navigateBack({})}},function(e){if(s.missions=t.getStorageSync("taskDetailsTaskProcess"+s.taskId)?t.getStorageSync("taskDetailsTaskProcess"+s.taskId):[],0==s.missions.length){var n=t.getStorageSync("onTask")?t.getStorageSync("onTask"):[];n.splice(n.indexOf(s.taskId)),t.setStorageSync("onTask",n),a.default.unUpLoction(s.taskId)}})},getFinish:function(e){var s=this;a.default.getRequest(i.default.TASK_PATROL_POINT_FINISH_LIST,{taskId:this.taskId,name:e},function(e){s.missions=e.data,t.setStorageSync("taskDetailsFinish"+s.taskId,s.missions)},function(e){s.missions=t.getStorageSync("taskDetailsFinish"+s.taskId)?t.getStorageSync("taskDetailsFinish"+s.taskId):[]})},getProblemList:function(e){var s=this;a.default.getRequest(i.default.TASK_PATROL_POINT_PROBLEM_LIST2,{taskId:this.taskId,name:e},function(e){s.missions=e.data,t.setStorageSync("taskDetailsProblemList"+s.taskId,s.missions)},function(e){s.missions=t.getStorageSync("taskDetailsProblemList"+s.taskId)?t.getStorageSync("taskDetailsProblemList"+s.taskId):[]})},checkType:function(t,e){switch(this.type=t,this.missions=[],t){case"process":this.getTaskProcess(e);break;case"finish":this.getFinish(e);break;case"issuesList":this.getProblemList(e);break}},takeCode:function(){var e=this;t.scanCode({onlyFromCamera:!0,success:function(t){e.filtrate(t.result)}})},filtrate:function(e){for(var s=0;s<this.missions.length;s++)if(this.missions[s].pollutionCode==e)return void(this.missions=[this.missions[s]]);t.showToast({icon:"none",title:"本任务中无该点位！"})},toLocation:function(e){a.default.pollutionInfo=e,t.navigateTo({url:"/pages/location/location"})},toContact:function(e){t.navigateTo({url:"/pages/contact/contact?id="+e.id})},toReportProblem:function(e){a.default.pollutionInfo=e,t.navigateTo({url:"/pages/reportProblem/reportProblem"})},toProblemList:function(e){t.navigateTo({url:"/pages/problemList/problemList?id="+e.id})},confirmTask:function(e){a.default.pollutionInfo=e,t.navigateTo({url:"/pages/completeTask/completeTask"})},previewImage:function(e){console.log(n(e," at pages\\taskDetails\\taskDetails.vue:180")),e.problemPhoto?t.previewImage({current:0,urls:e.problemPhoto?e.problemPhoto.split(";"):[]}):t.showToast({icon:"none",title:"该问题没有照片"})},scrollTol:function(){switch(this.type){case"process":this.getTaskProcess(this.page+1);break;case"finish":this.getFinish(this.page+1);break;case"issuesList":this.getProblemList(this.page+1);break}}},onNavigationBarButtonTap:function(t){this.checkType(this.type,this.name)},onNavigationBarSearchInputChanged:function(t){this.name=t.text},onNavigationBarSearchInputConfirmed:function(t){this.checkType(this.type,this.name)},onShow:function(){a.default.isRefreshPollutionPage&&(this.checkType(this.type,""),t.$emit("refreshPollutionPage",!1))},onUnload:function(){t.$emit("refreshPollutionPage",!0)}};e.default=l}).call(this,s("6e42")["default"],s("0de9")["default"])}},[["d60b","common/runtime","common/vendor"]]]);