(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/riverMap/riverMap"],{"04b5":function(e,t,a){"use strict";var n=a("117a"),o=a.n(n);o.a},"117a":function(e,t,a){},"27f8":function(e,t,a){"use strict";a.r(t);var n=a("9009"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);t["default"]=o.a},9009:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("c0ea")),o=s(a("2a75")),i=a("196c");function s(e){return e&&e.__esModule?e:{default:e}}var c={data:function(){return{latitude:"",longitude:"",checkTypeMap:"",mapContext:"",controls:[],covers:[],searchSub:"",allShowWry:{WRY_BZ_LIST:[],WRY_COMPANY_LIST:[],WRY_RHKPWK_LIST:[],WRY_RHKPWD_LIST:[],WRY_JZGD_LIST:[],WRY_QTHY_LIST:[],WRY_JCDW_LIST:[],WRY_YLJG_LIST:[],WRY_XQYZ_LIST:[],WRY_TZC_LIST:[],WRY_SHUIKU_LIST:[],WRY_SPT_LIST:[],WRY_YYC_LIST:[],WRY_JMJZJZD_LIST:[],WRY_XSLW_LIST:[],WRY_XCC_LIST:[],WRY_CYHY_LIST:[],WRY_NMSC_LIST:[],WRY_WSCLC_LIST:[],WRY_ZZYFLDJD_LIST:[],WRY_SMYSYZDH_LIST:[],search:[]},isWryUp:{WRY_BZ_LIST:!0,WRY_COMPANY_LIST:!0,WRY_RHKPWK_LIST:!0,WRY_RHKPWD_LIST:!0,WRY_JZGD_LIST:!0,WRY_QTHY_LIST:!0,WRY_JCDW_LIST:!0,WRY_YLJG_LIST:!0,WRY_XQYZ_LIST:!0,WRY_TZC_LIST:!0,WRY_SHUIKU_LIST:!0,WRY_SPT_LIST:!0,WRY_YYC_LIST:!0,WRY_JMJZJZD_LIST:!0,WRY_XSLW_LIST:!0,WRY_XCC_LIST:!0,WRY_CYHY_LIST:!0,WRY_NMSC_LIST:!0,WRY_WSCLC_LIST:!0,WRY_ZZYFLDJD_LIST:!0,WRY_SMYSYZDH_LIST:!0}}},onLoad:function(){this.userLocation=e.getStorageSync("userLocation");var t=i.mapTool.wgs84togcj02(this.userLocation.longitude,this.userLocation.latitude);this.longitude=t[0],this.latitude=t[1]},onReady:function(){this.init()},onShow:function(){this.mapContext.$getAppMap&&this.mapContext.$getAppMap().showUserLocation(!0)},methods:{init:function(){var t=this;this.mapContext=e.createMapContext("riverMap"),this.mapContext.$getAppMap().showUserLocation(!0),o.default.subNvue.checkTypeMap=e.getSubNVueById("checkTypeMap"),o.default.subNvue.searchSub=e.getSubNVueById("search"),o.default.subNvue.detailSub=e.getSubNVueById("detail");var a=e.getSystemInfoSync().screenWidth,n=a/750;this.controls=[{id:"mapType",position:{width:72*n,height:72*n,left:658*n,top:110*n},iconPath:"/static/images/icon_typeMap.png",clickable:!0}],e.$on("checkWry",function(e){t.getWrys(e)}),e.$on("upWry",function(e){for(var a in t.isWryUp)t.isWryUp[a]=!0}),e.$on("clearWry",function(e){t.allShowWry[e]=[],t.showWry(e)}),e.$on("closeSub",function(e){o.default.subNvue.checkTypeMap.hide("slide-out-right",300)}),e.$on("closeSearch",function(e){o.default.subNvue.searchSub.hide("slide-out-top",300)}),e.$on("closeDetail",function(e){o.default.subNvue.detailSub.hide("slide-out-bottom",300)}),e.$on("chooseMapType",function(e){t.mapContext.$getAppMap().setMapType(e)}),e.$on("onPollution",function(a){t.covers=[];var n=i.mapTool.wgs84togcj02(a.wryLongitude,a.wryLatitude),s=new plus.maps.Point(n[0],n[1]);for(var c in t.mapContext.$getAppMap().setCenter(s),t.allShowWry.search=[{id:a.wryCode,name:a.wryName,districtname:a.wryAddress,latitude:n[1],longitude:n[0],width:56,height:56,iconPath:"../../static/images/riverMap/icon_"+t.getIcon(a.wryType)+".png"}],t.allShowWry)t.covers=t.covers.concat(t.allShowWry[c]);t.latitude=n[1],t.longitude=n[0],o.default.subNvue.detailSub.show("slide-in-bottom",300,function(e){}),e.$emit("showDetail",t.allShowWry.search[0])})},showTypeMap:function(){o.default.subNvue.checkTypeMap.show("slide-in-right",300,function(e){})},showSearch:function(){o.default.subNvue.searchSub.show("slide-in-top",300,function(e){}),e.$emit("checkFocus",!0)},getIcon:function(e){switch(e){case"WRY_BZ_LIST":case"bengzhan":e="bz";break;case"WRY_COMPANY_LIST":case"gyqy":e="gyqy";break;case"WRY_RHKPWK_LIST":case"rhkpwk":e="rhpwk";break;case"WRY_RHKPWD_LIST":case"rhkpwd":e="rhpwd";break;case"WRY_JZGD_LIST":case"jianzhugongdi":e="jzgd";break;case"WRY_QTHY_LIST":case"qthy":e="qthy";break;case"WRY_JCDW_LIST":case"jcdw":e="jcdw";break;case"WRY_YLJG_LIST":case"yiliaojigou":e="yljg";break;case"WRY_XQYZ_LIST":case"xqyz":e="xqyz";break;case"WRY_TZC_LIST":e="tzc";break;case"WRY_SHUIKU_LIST":case"shuiku":e="sk";break;case"WRY_SPT_LIST":case"shanpingtang":e="spt";break;case"WRY_YYC_LIST":case"yangyuchi":e="yyc";break;case"WRY_JMJZJZD_LIST":case"jmjzjzd":e="jmjzjzd";break;case"WRY_XSLW_LIST":case"xiaosanluanwu":e="xslwqy";break;case"WRY_XCC_LIST":case"xichechang":e="xcc";break;case"WRY_CYHY_LIST":case"canyinhangye":e="cyhy";break;case"WRY_NMSC_LIST":case"nongmaoshichang":e="nmsc";break;case"WRY_WSCLC_LIST":case"wsclc":e="wsclc";break;case"WRY_ZZYFLDJD_LIST":case"zzyfldjd":e="zzyfldjd";break;case"WRY_SMYSYZDH_LIST":case"smysyzdh":e="10myszzdh";break}return e},getWrys:function(t){var a=this;this.isWryUp[t]?(e.showLoading({mask:!0}),o.default.getRequestPc(n.default.url_PC,{url:n.default[t]},function(n){e.hideLoading(),"WRY_WSCLC_LIST"==t&&(n=n.data),e.setStorageSync(t,n),a.allShowWry[t]=n,a.isWryUp[t]=!1,a.showWry(t)},function(n){a.allShowWry[t]=e.getStorageSync(t)?e.getStorageSync(t):a.allShowWry[t],a.showWry(t),e.hideLoading()})):(this.allShowWry[t]=e.getStorageSync(t)?e.getStorageSync(t):this.allShowWry[t],this.showWry(t))},bindTap:function(t){o.default.subNvue.detailSub.show("slide-in-bottom",300,function(e){}),e.$emit("showDetail",this.getPollution(t.markerId))},getPollution:function(e){for(var t=0;t<this.covers.length;t++)if(e==this.covers[t].id)return this.covers[t]},bindControltap:function(e){"mapType"==e.controlId&&o.default.subNvue.checkTypeMap.show("slide-in-right",300,function(e){})},showWry:function(e){this.covers=[];for(var t=this.allShowWry[e],a=0;a<t.length;a++)if("WRY_TZC_LIST"==e){var n=i.mapTool.wgs84togcj02(t[a].longitude,t[a].latitude);t[a]={id:e+t[a].id,name:t[a].name||t[a].sname||t[a].tname,districtname:t[a].districtname,latitude:n[1],longitude:n[0],iconPath:"../../static/images/riverMap/icon_"+this.getIcon(e)+".png"}}else{n=i.mapTool.wgs84togcj02(t[a].saddresssx,t[a].saddresssy);t[a]={id:e+t[a].id,name:t[a].name||t[a].sname||t[a].tname,districtname:t[a].districtname,latitude:n[1],longitude:n[0],iconPath:"../../static/images/riverMap/icon_"+this.getIcon(e)+".png"}}for(var o in this.allShowWry[e]=t,this.allShowWry)this.covers=this.covers.concat(this.allShowWry[o])}}};t.default=c}).call(this,a("6e42")["default"])},a7c2:function(e,t,a){"use strict";(function(e){a("61ce"),a("921b");n(a("66fd"));var t=n(a("faed"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},c268:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})},faed:function(e,t,a){"use strict";a.r(t);var n=a("c268"),o=a("27f8");for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);a("04b5");var s=a("2877"),c=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,null,null);t["default"]=c.exports}},[["a7c2","common/runtime","common/vendor"]]]);