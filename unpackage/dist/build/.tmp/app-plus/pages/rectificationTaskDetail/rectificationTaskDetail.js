(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/rectificationTaskDetail/rectificationTaskDetail"],{"00c6":function(t,i,e){"use strict";var a=e("1eea"),n=e.n(a);n.a},"1eea":function(t,i,e){},"775f":function(t,i,e){"use strict";e.r(i);var a=e("fb4c"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);i["default"]=n.a},"7bd3":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement;t._self._c},n=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return n})},c4f6:function(t,i,e){"use strict";e.r(i);var a=e("7bd3"),n=e("775f");for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);e("00c6");var s=e("2877"),c=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"75fc66ae",null);i["default"]=c.exports},fb4c:function(t,i,e){"use strict";(function(t,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=c(e("c0ea")),o=c(e("2a75")),s=e("196c");function c(t){return t&&t.__esModule?t:{default:t}}var l=function(){return e.e("components/createWaterMark/createWaterMark").then(e.bind(null,"5cfc"))},r={data:function(){return{pictures:[],taskDescription:"",longitude:"",latitude:"",imgUrl:"",taskDetail:{longitude:"",latitude:"",taskName:"",id:""},covers:[],circles:[],controls:[]}},components:{waterMark:l},onReady:function(){var i=t.createMapContext("locationMap"),e=i.$getAppMap();e.showUserLocation(!0),this.taskDetail=o.default.taskInfo,console.log(a(this.taskDetail," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:57"));var n="";n=this.taskDetail.wryLongitude?s.mapTool.wgs84togcj02(this.taskDetail.wryLongitude,this.taskDetail.wryLatitude):s.mapTool.wgs84togcj02(t.getStorageSync("userLocation").longitude,t.getStorageSync("userLocation").latitude),this.longitude=n[0],this.latitude=n[1],this.userInfo=t.getStorageSync("userInfo");var c=t.getSystemInfoSync().screenWidth,l=t.getSystemInfoSync().windowHeight,r=c/750;this.taskDetail.wryLongitude&&(this.controls=[{id:"toNavigation",position:{width:83*r,height:83*r,left:617*r,top:l/2-103*r},iconPath:"/static/images/icon_navigation.png",clickable:!0}],this.covers=[{id:"person1",latitude:this.latitude,longitude:this.longitude,iconPath:"../../static/images/dingwei.png",label:{content:this.taskDetail.address,color:"#5087FB"}}])},onLoad:function(t){},methods:{delPicture:function(t){var i=this.pictures;i.splice(t,1),this.pictures=i},getPhotoUrl:function(t){this.imgUrl="",this.pictures.push(t)},getDistance:function(){var i=this,e=new plus.maps.Point(t.getStorageSync("userLocation").longitude,t.getStorageSync("userLocation").latitude),n=new plus.maps.Point(this.taskDetail.wryLongitude,this.taskDetail.wryLatitude);plus.maps.Map.calculateDistance(e,n,function(e){e.distance>i.taskDetail.distanceLimit&&1==i.taskDetail.mustInRange?(console.log(a("this.pictures.length"," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:129")),t.showToast({icon:"none",title:"距离任务地点太远，无法完成！"})):i.confirm()})},bindControltap:function(t){"toNavigation"==t.controlId&&this.toNavigation()},toNavigation:function(){var t=this,i=s.mapTool.wgs84togcj02(t.taskDetail.wryLongitude,t.taskDetail.wryLatitude),e=i[0],n=i[1];"Android"==plus.os.name?plus.runtime.openURL("amapuri://route/plan/?sid=BGVIS1&did=BGVIS2&dlat="+n+"&dlon="+e+"&dev=0&t=0",function(t){console.log(a("Open system default browser failed: "+t.message," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:154"))},"com.autonavi.minimap"):"iOS"==plus.os.name&&plus.runtime.launchApplication({action:"iosamap://path?sourceApplication=applicationName&sid=BGVIS1&did=BGVIS2&dlat="+n+"&dlon="+e+"&dev=0&t=0"},function(t){console.log(a("Open system default browser failed: "+t.message," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:159"))})},takingPictures:function(){var i=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(t){console.log(a(t," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:170")),i.imgUrl=t.tempFilePaths[0]}})},getImgUrl:function(t){var i=this;o.default.uploadFile(n.default.UPLOAD_UPLOAD,t,function(t){console.log(a(t," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:178")),t=JSON.parse(t),console.log(a(t.data," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:180")),i.pictures.push(t.data)})},inpDetail:function(t){this.taskDescription=t.detail.value},confirm:function(){if(0!=this.pictures.length){var i={taskDescription:this.taskDescription,id:this.taskDetail.id,taskStatus:100,rectificationPhoto:this.pictures.join(";")};o.default.rectificationTaskDetail(i),t.showLoading({mask:!0}),setTimeout(function(){t.hideLoading(),t.navigateBack(),t.$emit("refreshTasksPage",!0)},500)}else t.showToast({icon:"none",title:"请拍照上传！"})},cancel:function(){t.navigateBack({}),t.$emit("refreshTasksPage",!1)}}};i.default=r}).call(this,e("6e42")["default"],e("0de9")["default"])}},[["ef4d","common/runtime","common/vendor"]]]);