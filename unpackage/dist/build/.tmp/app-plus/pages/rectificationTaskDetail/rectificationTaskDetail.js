(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/rectificationTaskDetail/rectificationTaskDetail"],{1356:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"31a2":function(t,e,i){"use strict";var a=i("62cb"),n=i.n(a);n.a},"62cb":function(t,e,i){},"775f":function(t,e,i){"use strict";i.r(e);var a=i("fb4c"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},c4f6:function(t,e,i){"use strict";i.r(e);var a=i("1356"),n=i("775f");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("31a2");var o=i("2877"),c=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"783f3725",null);e["default"]=c.exports},fb4c:function(t,e,i){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(i("c0ea")),s=c(i("2a75")),o=i("196c");function c(t){return t&&t.__esModule?t:{default:t}}var u={data:function(){return{pictures:[],taskDescription:"",longitude:"",latitude:"",taskDetail:{longitude:"",latitude:""},covers:[],circles:[]}},onReady:function(){var e=t.createMapContext("locationMap"),i=e.$getAppMap();i.showUserLocation(!0)},onLoad:function(e){this.taskDetail.taskName=e.taskName,this.taskDetail.taskId=e.taskId;var i=o.mapTool.wgs84togcj02(t.getStorageSync("userLocation").longitude,t.getStorageSync("userLocation").latitude);this.latitude=i[1],this.longitude=i[0],this.taskDetail.longitude=e.longitude,this.taskDetail.latitude=e.latitude,this.userInfo=t.getStorageSync("userInfo")},methods:{delPicture:function(t){var e=this.pictures;e.splice(t,1),this.pictures=e},getDistance:function(){var e=this,i=new plus.maps.Point(t.getStorageSync("userLocation").longitude,t.getStorageSync("userLocation").latitude),n=new plus.maps.Point(this.taskDetail.longitude,this.taskDetail.latitude);plus.maps.Map.calculateDistance(i,n,function(i){i.distance>e.taskDetail.distanceLimit&&1==e.taskDetail.mustInRange?(console.log(a("this.pictures.length"," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:71")),t.showToast({icon:"none",title:"距离任务地点太远，无法完成！"})):e.confirm()})},takingPictures:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(t){console.log(a(t," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:89")),e.pictures.push(t.tempFilePaths[0])}})},getImgUrl:function(t){var e=this;s.default.uploadFile(n.default.UPLOAD_UPLOAD,t,function(t){console.log(a(t," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:96")),t=JSON.parse(t),console.log(a(t.data," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:98")),e.pictures.push(t.data)})},inpDetail:function(t){this.taskDescription=t.detail.value},confirm:function(){if(0!=this.pictures.length){var e={taskDescription:this.taskDescription,id:this.taskDetail.taskId,taskStatus:100,rectificationPhoto:this.pictures.join(";")};s.default.rectificationTaskDetail(e),t.showLoading({mask:!0}),setTimeout(function(){t.hideLoading(),t.navigateBack(),t.$emit("refreshTasksPage",!0)},500)}else t.showToast({icon:"none",title:"请拍照上传！"})},cancel:function(){t.navigateBack({}),t.$emit("refreshTasksPage",!1)}}};e.default=u}).call(this,i("6e42")["default"],i("0de9")["default"])}},[["ef4d","common/runtime","common/vendor"]]]);