(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/rectificationTaskDetail/rectificationTaskDetail"],{1458:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement;t._self._c},n=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return n})},"5bd9":function(t,i,e){"use strict";var a=e("d954"),n=e.n(a);n.a},"775f":function(t,i,e){"use strict";e.r(i);var a=e("fb4c"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);i["default"]=n.a},c4f6:function(t,i,e){"use strict";e.r(i);var a=e("1458"),n=e("775f");for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);e("5bd9");var s=e("2877"),c=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"3f3e090a",null);i["default"]=c.exports},d954:function(t,i,e){},fb4c:function(t,i,e){"use strict";(function(t,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=c(e("c0ea")),o=c(e("2a75")),s=e("196c");function c(t){return t&&t.__esModule?t:{default:t}}var u={data:function(){return{pictures:[],taskDescription:"",longitude:"",latitude:"",taskDetail:{longitude:"",latitude:"",taskName:"",taskId:""},covers:[],circles:[],controls:[]}},onReady:function(){var i=t.createMapContext("locationMap"),e=i.$getAppMap();e.showUserLocation(!0),this.taskDetail=o.default.taskInfo;var a="";a=this.taskDetail.wryLongitude?s.mapTool.wgs84togcj02(this.taskDetail.wryLongitude,this.taskDetail.wryLatitude):s.mapTool.wgs84togcj02(t.getStorageSync("userLocation").longitude,t.getStorageSync("userLocation").latitude),this.longitude=a[0],this.latitude=a[1],this.userInfo=t.getStorageSync("userInfo");var n=t.getSystemInfoSync().screenWidth,c=t.getSystemInfoSync().windowHeight,u=n/750;this.taskDetail.wryLongitude&&(this.controls=[{id:"toNavigation",position:{width:83*u,height:83*u,left:617*u,top:c/2-103*u},iconPath:"/static/images/icon_navigation.png",clickable:!0}],this.covers=[{id:"person1",latitude:this.latitude,longitude:this.longitude,iconPath:"../../static/images/dingwei.png",label:{content:this.taskDetail.address,color:"#5087FB"}}])},onLoad:function(t){},methods:{delPicture:function(t){var i=this.pictures;i.splice(t,1),this.pictures=i},getDistance:function(){var i=this,e=new plus.maps.Point(t.getStorageSync("userLocation").longitude,t.getStorageSync("userLocation").latitude),n=new plus.maps.Point(this.taskDetail.wryLongitude,this.taskDetail.wryLatitude);plus.maps.Map.calculateDistance(e,n,function(e){e.distance>i.taskDetail.distanceLimit&&1==i.taskDetail.mustInRange?(console.log(a("this.pictures.length"," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:118")),t.showToast({icon:"none",title:"距离任务地点太远，无法完成！"})):i.confirm()})},bindControltap:function(t){"toNavigation"==t.controlId&&this.toNavigation()},toNavigation:function(){var t=this,i=s.mapTool.wgs84togcj02(t.taskDetail.wryLongitude,t.taskDetail.wryLatitude),e=i[0],n=i[1];"Android"==plus.os.name?plus.runtime.openURL("amapuri://route/plan/?sid=BGVIS1&did=BGVIS2&dlat="+n+"&dlon="+e+"&dev=0&t=0",function(t){console.log(a("Open system default browser failed: "+t.message," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:143"))},"com.autonavi.minimap"):"iOS"==plus.os.name&&plus.runtime.launchApplication({action:"iosamap://path?sourceApplication=applicationName&sid=BGVIS1&did=BGVIS2&dlat="+n+"&dlon="+e+"&dev=0&t=0"},function(t){console.log(a("Open system default browser failed: "+t.message," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:148"))})},takingPictures:function(){var i=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(t){i.pictures.push(t.tempFilePaths[0])}})},getImgUrl:function(t){var i=this;o.default.uploadFile(n.default.UPLOAD_UPLOAD,t,function(t){console.log(a(t," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:166")),t=JSON.parse(t),console.log(a(t.data," at pages\\rectificationTaskDetail\\rectificationTaskDetail.vue:168")),i.pictures.push(t.data)})},inpDetail:function(t){this.taskDescription=t.detail.value},confirm:function(){if(0!=this.pictures.length){var i={taskDescription:this.taskDescription,id:this.taskDetail.taskId,taskStatus:100,rectificationPhoto:this.pictures.join(";")};o.default.rectificationTaskDetail(i),t.showLoading({mask:!0}),setTimeout(function(){t.hideLoading(),t.navigateBack(),t.$emit("refreshTasksPage",!0)},500)}else t.showToast({icon:"none",title:"请拍照上传！"})},cancel:function(){t.navigateBack({}),t.$emit("refreshTasksPage",!1)}}};i.default=u}).call(this,e("6e42")["default"],e("0de9")["default"])}},[["ef4d","common/runtime","common/vendor"]]]);